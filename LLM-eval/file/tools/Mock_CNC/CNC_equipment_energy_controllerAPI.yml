openapi: 3.0.3
info:
  title: CNC设备能耗与效率控制器API
  description: CNC设备能耗监控和效率分析相关接口
  version: 1.0.0
  contact:
    name: CNC设备能耗与效率API
servers:
  - url: http://192.168.2.201:8089
tags:
  - name: 设备能耗
    description: 设备能耗监控相关操作
  - name: 效率分析
    description: 设备效率分析相关操作
  - name: 停机记录
    description: 设备停机记录相关操作
paths:
  /cnc/process/efficiency/power:
    post:
      tags:
        - 设备能耗
      summary: 上传能耗数据
      description: 上传设备能耗监测数据
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                machineId:
                  type: string
                  description: 设备ID
                  example: "MACHINE-001"
                timestamp:
                  type: string
                  description: 时间戳
                  example: "2025-09-23T10:30:00Z"
                powerConsumption:
                  type: number
                  description: 能耗值
                  example: 15.5
                voltage:
                  type: number
                  description: 电压
                  example: 380.0
                current:
                  type: number
                  description: 电流
                  example: 25.3
                powerFactor:
                  type: number
                  description: 功率因数
                  example: 0.92
              required:
                - machineId
                - timestamp
                - powerConsumption
                - voltage
                - current
                - powerFactor
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  recordId:
                    type: integer
                    example: 1695476400000
                  machineId:
                    type: string
                    example: "MACHINE-001"
                  timestamp:
                    type: string
                    example: "2025-09-23T10:30:00Z"
                  powerConsumption:
                    type: number
                    example: 15.5
                  voltage:
                    type: number
                    example: 380.0
                  current:
                    type: number
                    example: 25.3
                  powerFactor:
                    type: number
                    example: 0.92
                  createdAt:
                    type: string
                    format: date-time
    get:
      tags:
        - 设备能耗
      summary: 查询能耗数据
      description: 根据记录ID查询能耗数据
      parameters:
        - name: recordId
          in: path
          required: true
          schema:
            type: integer
          description: 记录ID
          example: 1695476400000
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  recordId:
                    type: integer
                    example: 1695476400000
                  machineId:
                    type: string
                    example: "MACHINE-001"
                  timestamp:
                    type: string
                    example: "2025-09-23T10:30:00Z"
                  powerConsumption:
                    type: number
                    example: 15.5
                  voltage:
                    type: number
                    example: 380.0
                  current:
                    type: number
                    example: 25.3
                  powerFactor:
                    type: number
                    example: 0.92
        '400':
          description: 无效的记录ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "无效的记录ID"
