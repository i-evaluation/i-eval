openapi: 3.0.3
info:
  title: CNC刀具控制器API
  description: CNC刀具管理和使用记录相关接口
  version: 1.0.0
  contact:
    name: CNC刀具管理API
servers:
  - url: http://192.168.2.201:8083
    description: 开发环境服务器
paths:
  /cnc/process/tools:
    post:
      tags:
        - 刀具管理
      summary: 上传刀具信息
      description: 上传刀具基本信息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                toolName:
                  type: string
                  description: 刀具名称
                  example: "硬质合金铣刀"
              required:
                - toolName
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1695476400000
                  toolName:
                    type: string
                    example: "硬质合金铣刀"
                  createdAt:
                    type: string
                    format: date-time
  /cnc/process/tools/{toolId}:
    get:
      tags:
        - 刀具管理
      summary: 获取查询刀具信息
      description: 根据刀具ID查询刀具详情
      parameters:
        - name: toolId
          in: path
          required: true
          schema:
            type: integer
          description: 刀具ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1
                  toolName:
                    type: string
                    example: "示例刀具"
                  status:
                    type: string
                    example: "正常"
        '400':
          description: 无效的刀具ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "无效的刀具ID"
  /cnc/process/tools/usage:
    post:
      tags:
        - 使用记录
      summary: 上传刀具使用记录
      description: 上传刀具使用记录信息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                toolId:
                  type: integer
                  description: 刀具ID
                  example: 1
                duration:
                  type: string
                  description: 使用时长
                  example: "2小时"
              required:
                - toolId
                - duration
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  usageId:
                    type: integer
                    example: 1695476400000
                  toolId:
                    type: integer
                    example: 1
                  duration:
                    type: string
                    example: "2小时"
  /cnc/process/tools/usage/{toolId}:
    get:
      tags:
        - 使用记录
      summary: 查询刀具使用记录
      description: 查询指定刀具的使用记录
      parameters:
        - name: toolId
          in: path
          required: true
          schema:
            type: integer
          description: 刀具ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1
                  usageRecords:
                    type: array
                    items:
                      type: string
                    example: ["使用1h", "使用3h"]
  /cnc/process/tools/consumption:
    post:
      tags:
        - 消耗统计
      summary: 上传刀具消耗统计
      description: 上传刀具消耗统计数据
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                toolId:
                  type: integer
                  description: 刀具ID
                  example: 1
                consumptionValue:
                  type: string
                  description: 消耗值
                  example: "50%"
              required:
                - toolId
                - consumptionValue
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  consumptionId:
                    type: integer
                    example: 1695476400000
                  toolId:
                    type: integer
                    example: 1
                  consumptionValue:
                    type: string
                    example: "50%"
  /cnc/process/tools/consumption/{toolId}:
    get:
      tags:
        - 消耗统计
      summary: 查询刀具消耗统计
      description: 查询指定刀具的消耗统计
      parameters:
        - name: toolId
          in: path
          required: true
          schema:
            type: integer
          description: 刀具ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1
                  consumptionValue:
                    type: string
                    example: "50%"
  /cnc/process/tools/life/{toolId}:
    get:
      tags:
        - 寿命管理
      summary: 查询刀具剩余寿命
      description: 查询刀具剩余使用寿命
      parameters:
        - name: toolId
          in: path
          required: true
          schema:
            type: integer
          description: 刀具ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1
                  remainingLife:
                    type: string
                    example: "100小时"
  /cnc/process/tools/life/{toolId}/adjust:
    post:
      tags:
        - 寿命管理
      summary: 调整刀具寿命
      description: 调整刀具寿命设置
      parameters:
        - name: toolId
          in: path
          required: true
          schema:
            type: integer
          description: 刀具ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newLife:
                  type: string
                  description: 新的寿命值
                  example: "120小时"
              required:
                - newLife
      responses:
        '200':
          description: 调整成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  toolId:
                    type: integer
                    example: 1
                  newLife:
                    type: string
                    example: "120小时"
