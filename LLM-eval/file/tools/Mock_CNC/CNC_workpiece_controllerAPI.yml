openapi: 3.0.3
info:
  title: CNC工件控制器API
  description: CNC工件管理和运输存储相关接口
  version: 1.0.0
  contact:
    name: CNC工件管理API
servers:
  - url: http://192.168.2.201:8089
tags:
  - name: 工件管理
    description: 工件信息管理相关操作
  - name: 批次管理
    description: 工件批次管理相关操作
  - name: 运输管理
    description: 工件运输记录相关操作
  - name: 存储管理
    description: 工件存储位置相关操作
paths:
  /cnc/process/workpieces:
    post:
      tags:
        - 工件管理
      summary: 上传工件信息
      description: 上传工件基本信息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                workpieceName:
                  type: string
                  description: 工件名称
                  example: "铝合金零件A"
              required:
                - workpieceName
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1695476400000
                  workpieceName:
                    type: string
                    example: "铝合金零件A"
                  createdAt:
                    type: string
                    format: date-time
    get:
      tags:
        - 工件管理
      summary: 查询所有工件
      description: 获取所有工件列表
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieces:
                    type: array
                    items:
                      type: string
                    example: ["工件A", "工件B"]
  /cnc/process/workpieces/{workpieceId}:
    get:
      tags:
        - 工件管理
      summary: 查询工件信息
      description: 根据工件ID查询工件详情
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  workpieceName:
                    type: string
                    example: "示例工件"
        '400':
          description: 无效的工件ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "无效的工件ID"
  /cnc/process/workpieces/{workpieceId}/batch:
    post:
      tags:
        - 批次管理
      summary: 上传工件批次信息
      description: 上传工件批次信息
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                batchName:
                  type: string
                  description: 批次名称
                  example: "2025-09批次"
              required:
                - batchName
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  batchId:
                    type: integer
                    example: 1695476400000
                  batchName:
                    type: string
                    example: "2025-09批次"
  /cnc/process/workpieces/batch/{batchId}:
    get:
      tags:
        - 批次管理
      summary: 查询批次信息
      description: 根据批次ID查询批次详情
      parameters:
        - name: batchId
          in: path
          required: true
          schema:
            type: integer
          description: 批次ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  batchId:
                    type: integer
                    example: 1
                  batchName:
                    type: string
                    example: "示例批次"
  /cnc/process/workpieces/{workpieceId}/transport:
    post:
      tags:
        - 运输管理
      summary: 上传运输记录
      description: 上传工件运输记录
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                route:
                  type: string
                  description: 运输路线
                  example: "车间A -> 车间B"
              required:
                - route
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  transportId:
                    type: integer
                    example: 1695476400000
                  route:
                    type: string
                    example: "车间A -> 车间B"
    get:
      tags:
        - 运输管理
      summary: 查询运输记录
      description: 查询工件运输记录
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  transportRecords:
                    type: array
                    items:
                      type: string
                    example: ["运输1", "运输2"]
  /cnc/process/workpieces/{workpieceId}/storage:
    post:
      tags:
        - 存储管理
      summary: 上传存储位置
      description: 上传工件存储位置信息
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                location:
                  type: string
                  description: 存储位置
                  example: "仓库A-1"
              required:
                - location
      responses:
        '200':
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  location:
                    type: string
                    example: "仓库A-1"
    get:
      tags:
        - 存储管理
      summary: 查询存储位置
      description: 查询工件存储位置
      parameters:
        - name: workpieceId
          in: path
          required: true
          schema:
            type: integer
          description: 工件ID
          example: 1
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  workpieceId:
                    type: integer
                    example: 1
                  location:
                    type: string
                    example: "仓库A-1"
